<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>MZI</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header
              mdl-layout--fixed-tabs">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <!-- Title -->
          <span class="mdl-layout-title">MZI</span>
        </div>
        <!-- Tabs -->
        <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
          <a href="#fixed-tab-1" class="mdl-layout__tab is-active">ЛР 1 (Шифр Цезаря)</a>
          <a href="#fixed-tab-2" class="mdl-layout__tab">Лр 2</a>
          <a href="#fixed-tab-3" class="mdl-layout__tab">Лр 3 (AES)</a>
        </div>
      </header>
      <main class="mdl-layout__content">
        <section class="mdl-layout__tab-panel is-active" id="fixed-tab-1">
          <div class="page-content">
            <form action="#" style="flex: 1;align-items: center;height: 100vh;justify-content: center; padding: 100px;">
              <div class="mdl-textfield mdl-js-textfield">
                <input class="mdl-textfield__input" type="text" id="text">
                <label class="mdl-textfield__label" for="text">Текст</label>
              </div>

              <div class="mdl-textfield mdl-js-textfield">
                <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="shift">
                <label class="mdl-textfield__label" for="shift">Сдвиг</label>
                <span class="mdl-textfield__error">Не число!</span>
              </div>

              <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" id="encrypt">
                Зашифровать
              </button>
              <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" id="decrypt">
                Расшифровать
              </button>
            </form>
          </div>
        </section>
        <section class="mdl-layout__tab-panel" id="fixed-tab-2">
          <div class="page-content">
            Тут будет вторая лаба
          </div>
        </section>
        <section class="mdl-layout__tab-panel" id="fixed-tab-3">
          <div class="page-content">
            <form action="#" style="flex: 1;align-items: center;height: 100vh;justify-content: center; padding: 100px;">
              <div class="mdl-textfield mdl-js-textfield">
                <input class="mdl-textfield__input" type="text" id="aes-text">
                <label class="mdl-textfield__label" for="aes-text">Текст</label>
              </div>

              <div class="mdl-textfield mdl-js-textfield">
                <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="aes-key">
                <label class="mdl-textfield__label" for="aes-key">Ключ</label>
              </div>

              <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" id="aes-encrypt">
                Зашифровать
              </button>
              <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" id="aes-decrypt">
                Расшифровать
              </button>
            </form>
          </div>
        </section>
      </main>
    </div>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <script>
      var socket = io('http://localhost:3000');

      socket.on('caesarResult', function (data) {
        $('#text').val(data)
      });

      socket.on('aesResult', function (data) {
        $('#aes-text').val(data)
      });

      $('#encrypt').click(function() {
        const text = $('#text').val();
        const shift = $('#shift').val();

        if (!text || !shift) {
          alert('Неа');
          return;
        }

        socket.emit('caesarEncrypt', JSON.stringify({ text, shift }));
      });

      $('#decrypt').click(function() {
        const text = $('#text').val();
        const shift = $('#shift').val();

        if (!text || !shift) {
          alert('Неа');
          return;
        }

        socket.emit('caesarDecrypt', JSON.stringify({ text, shift }));
      });

      $('#aes-encrypt').click(function() {
        const text = $('#aes-text').val();
        const key = $('#aes-key').val();

        if (!text || !key) {
          alert('Неа');
          return;
        }

        socket.emit('aesEncrypt', JSON.stringify({ text, key }));
      });

      $('#aes-decrypt').click(function() {
        const text = $('#aes-text').val();
        const key = $('#aes-key').val();

        if (!text || !key) {
          alert('Неа');
          return;
        }

        socket.emit('aesDecrypt', JSON.stringify({ text, key }));
      });
    </script>
  </body>
</html>